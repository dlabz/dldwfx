[{"kind":1,"language":"markdown","value":"# Parsing DWFX files\nfile is first unzipped to `extracted/` folder in subflder matching name of the file."},{"kind":2,"language":"xpath","value":"variable = document-root % resolve-uri('extracted/House/',static-base-uri())"},{"kind":2,"language":"xpath","value":"variable = manifest-uri % resolve-uri('dwf/documents/9387EE8F-2A91-433B-9F7C-ACAF896F858D/manifest.xml', $document-root )"},{"kind":2,"language":"xpath","value":"variable = manifest % doc($manifest-uri)/dwf:Manifest"},{"kind":2,"language":"xpath","value":"map {\n    \"interfaces\": (\n        for $interface in doc($manifest-uri)/dwf:Manifest/dwf:Interfaces/dwf:Interface\n        return\n        map {\n            \"name\": string($interface/@objectId)\n        }\n    ),\n    \"contents\": (\n        for $contents in doc($manifest-uri)/dwf:Manifest/dwf:Contents/dwf:Content\n        return\n        map {\n            \"href\": string($contents/@href)\n        }\n    ),\n    \"sections\": (\n        for $section in doc($manifest-uri)/dwf:Manifest/dwf:Sections/dwf:Section[@type=\"com.autodesk.dwf.ePlot\"]\n        return\n        map{\n            \"type\": string($section/@type),\n            \"name\": string($section/@name),\n            \"title\": string($section/@title),\n            \"source\": map {\n                \"provider\": string($section/dwf:Source/@provider)\n            },\n            \"TOC\": \n            for $resource in $section/dwf:Toc/dwf:Resource\n            return \n                map { \n                    \"role\": string($resource/@role),\n                    \"mime\": string($resource/@mime),\n                    \"href\": string($resource/@href)\n                } \n        })\n}"},{"kind":2,"language":"xpath","value":"for $r in doc($manifest-uri)/dwf:Manifest/dwf:Sections/dwf:Section[@type = \"com.autodesk.dwf.ePlot\"]\nreturn \nresolve-uri( string-join(['.',string($r/dwf:Toc/dwf:Resource[@role=\"descriptor\"]/@href )]), $document-root)\n"},{"kind":2,"language":"xpath","value":"for $duri in $_\nreturn \n[\n    $duri,\n    string(doc($duri)//ePlot:Page/@name)\n]\n\n\n\n"},{"kind":2,"language":"xpath","value":"for $d in $_\nreturn (\n    $d//ePlot:Page/@name\n)"}]